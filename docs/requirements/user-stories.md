# User Stories (사용자 스토리)

> 사용자 관점의 기능 명세
> - 클라이언트와의 소통 도구로 활용
> - 인수테스트 시나리오 기반
> - 비즈니스 요구사항을 사용자 중심으로 구체화

---

## 📋 목차
1. [잔액 관리](#1-잔액-관리)
2. [상품 조회 및 검색](#2-상품-조회-및-검색)
3. [장바구니 관리](#3-장바구니-관리)
4. [주문 및 결제](#4-주문-및-결제)
5. [쿠폰 관리](#5-쿠폰-관리)
6. [재입고 알림](#6-재입고-알림)

---

## 1. 잔액 관리

### US-001: 잔액 충전
**As a** 사용자
**I want to** 내 계정에 잔액을 충전하고 싶다
**So that** 상품을 구매할 수 있다

#### 인수 조건 (Acceptance Criteria)
- [ ] 사용자는 충전할 금액을 입력할 수 있다
- [ ] 최소 충전 금액은 1,000원이다
- [ ] 충전 후 즉시 잔액이 반영된다
- [ ] 충전 내역이 잔액 이력에 기록된다
- [ ] 충전 실패 시 적절한 에러 메시지를 표시한다

#### 시나리오
```gherkin
Given 사용자의 현재 잔액이 10,000원일 때
When 사용자가 5,000원을 충전하면
Then 잔액이 15,000원이 된다
And 잔액 이력에 "CHARGE" 타입으로 5,000원이 기록된다
```

---

### US-002: 잔액 조회
**As a** 사용자
**I want to** 내 현재 잔액을 조회하고 싶다
**So that** 구매 가능한 금액을 확인할 수 있다

#### 인수 조건
- [ ] 사용자는 실시간 잔액을 확인할 수 있다
- [ ] 잔액 이력을 페이지별로 조회할 수 있다
- [ ] 이력에는 거래 유형, 금액, 변경 전후 잔액이 표시된다

---

### US-003: 잔액 사용 이력 조회
**As a** 사용자
**I want to** 내 잔액 사용 내역을 확인하고 싶다
**So that** 어디에 돈을 사용했는지 추적할 수 있다

#### 인수 조건
- [ ] 충전, 사용, 환불 내역을 모두 확인할 수 있다
- [ ] 날짜 순으로 정렬되어 표시된다
- [ ] 각 거래에 대한 설명이 포함된다

---

## 2. 상품 조회 및 검색

### US-004: 상품 목록 조회
**As a** 사용자
**I want to** 판매 중인 상품 목록을 보고 싶다
**So that** 구매할 상품을 찾을 수 있다

#### 인수 조건
- [ ] 상품 목록을 페이지 단위로 조회할 수 있다 (기본 20개)
- [ ] 각 상품의 이름, 가격, 재고 상태가 표시된다
- [ ] 품절 상품은 "품절" 표시가 된다

#### 시나리오
```gherkin
Given 시스템에 50개의 상품이 등록되어 있을 때
When 사용자가 첫 페이지를 요청하면
Then 20개의 상품이 반환된다
And 총 페이지 수는 3이다
```

---

### US-005: 상품 상세 조회
**As a** 사용자
**I want to** 상품의 상세 정보를 보고 싶다
**So that** 구매 전에 상품 정보를 확인할 수 있다

#### 인수 조건
- [ ] 상품명, 설명, 가격, 재고 수량이 표시된다
- [ ] 카테고리 정보가 표시된다
- [ ] 품절 여부를 명확히 확인할 수 있다

---

### US-006: 인기 상품 조회 (Top 5)
**As a** 사용자
**I want to** 최근 인기 있는 상품을 보고 싶다
**So that** 다른 사람들이 많이 구매하는 상품을 참고할 수 있다

#### 인수 조건
- [ ] 최근 3일간 판매량 기준 상위 5개 상품이 표시된다
- [ ] 판매 수량이 많은 순서대로 정렬된다
- [ ] 각 상품의 판매 수량이 표시된다

#### 시나리오
```gherkin
Given 최근 3일간 상품 A가 100개, 상품 B가 80개 판매되었을 때
When 사용자가 인기 상품을 조회하면
Then 상품 A가 1위로 표시된다
And 상품 B가 2위로 표시된다
```

---

### US-007: 카테고리별 상품 조회
**As a** 사용자
**I want to** 특정 카테고리의 상품만 보고 싶다
**So that** 원하는 종류의 상품을 빠르게 찾을 수 있다

#### 인수 조건
- [ ] 카테고리 목록을 조회할 수 있다
- [ ] 카테고리를 선택하면 해당 상품만 필터링된다
- [ ] 필터링된 결과도 페이징 처리된다

---

## 3. 장바구니 관리

### US-008: 장바구니에 상품 추가
**As a** 사용자
**I want to** 마음에 드는 상품을 장바구니에 담고 싶다
**So that** 나중에 한꺼번에 결제할 수 있다

#### 인수 조건
- [ ] 원하는 수량만큼 장바구니에 추가할 수 있다
- [ ] 재고보다 많은 수량은 추가할 수 없다
- [ ] 이미 장바구니에 있는 상품은 수량이 누적된다
- [ ] 품절 상품은 장바구니에 추가할 수 없다

#### 시나리오
```gherkin
Given 상품 A의 재고가 10개일 때
When 사용자가 상품 A를 5개 장바구니에 추가하면
Then 장바구니에 상품 A가 5개 담긴다

Given 장바구니에 이미 상품 A가 5개 있을 때
When 사용자가 상품 A를 3개 더 추가하면
Then 장바구니의 상품 A가 8개가 된다
```

---

### US-009: 장바구니 조회
**As a** 사용자
**I want to** 내 장바구니에 담긴 상품을 보고 싶다
**So that** 구매할 항목을 확인하고 수정할 수 있다

#### 인수 조건
- [ ] 담긴 모든 상품이 표시된다
- [ ] 각 상품의 가격, 수량, 소계가 표시된다
- [ ] 전체 합계 금액이 표시된다
- [ ] 장바구니에 담을 당시 가격과 현재 가격이 다르면 알림을 표시한다

---

### US-010: 장바구니 상품 수량 변경
**As a** 사용자
**I want to** 장바구니에 담긴 상품의 수량을 변경하고 싶다
**So that** 주문량을 조절할 수 있다

#### 인수 조건
- [ ] 수량을 늘리거나 줄일 수 있다
- [ ] 재고 수량을 초과할 수 없다
- [ ] 수량을 0으로 설정하면 상품이 삭제된다
- [ ] 변경 후 소계와 합계가 자동 계산된다

---

### US-011: 장바구니 상품 삭제
**As a** 사용자
**I want to** 장바구니에서 상품을 삭제하고 싶다
**So that** 구매하지 않을 상품을 제거할 수 있다

#### 인수 조건
- [ ] 개별 상품을 삭제할 수 있다
- [ ] 장바구니 전체를 비울 수 있다
- [ ] 삭제 후 합계 금액이 재계산된다

---

## 4. 주문 및 결제

### US-012: 주문 생성 및 결제
**As a** 사용자
**I want to** 장바구니의 상품을 주문하고 결제하고 싶다
**So that** 상품을 구매할 수 있다

#### 인수 조건
- [ ] 잔액이 충분하면 결제가 완료된다
- [ ] 잔액이 부족하면 결제가 실패한다
- [ ] 재고가 부족하면 주문이 실패한다
- [ ] 결제 성공 시 재고가 차감된다
- [ ] 결제 성공 시 잔액이 차감된다
- [ ] 쿠폰을 적용하면 할인된 금액으로 결제된다
- [ ] 결제 완료 후 주문 번호가 발급된다

#### 시나리오
```gherkin
Given 사용자 잔액이 50,000원이고
And 장바구니에 20,000원짜리 상품이 2개 있을 때
When 사용자가 주문을 생성하면
Then 결제가 성공한다
And 잔액이 10,000원이 된다
And 상품 재고가 2개 감소한다
```

#### 실패 시나리오
```gherkin
Given 사용자 잔액이 10,000원이고
And 장바구니에 20,000원짜리 상품이 1개 있을 때
When 사용자가 주문을 생성하면
Then "잔액이 부족합니다" 에러가 발생한다
And 재고는 변경되지 않는다
```

---

### US-013: 주문 내역 조회
**As a** 사용자
**I want to** 내 주문 내역을 보고 싶다
**So that** 과거 구매 이력을 확인할 수 있다

#### 인수 조건
- [ ] 주문 목록을 최신순으로 조회할 수 있다
- [ ] 각 주문의 번호, 금액, 상태, 주문일시가 표시된다
- [ ] 페이징 처리되어 표시된다

---

### US-014: 주문 상세 조회
**As a** 사용자
**I want to** 특정 주문의 상세 정보를 보고 싶다
**So that** 무엇을 주문했는지 확인할 수 있다

#### 인수 조건
- [ ] 주문한 상품 목록이 표시된다
- [ ] 각 상품의 가격, 수량, 소계가 표시된다
- [ ] 할인 금액과 최종 결제 금액이 표시된다
- [ ] 사용한 쿠폰 정보가 표시된다
- [ ] 결제 방법과 결제 상태가 표시된다

---

### US-015: 주문 취소
**As a** 사용자
**I want to** 결제 완료한 주문을 취소하고 싶다
**So that** 실수로 주문한 경우 되돌릴 수 있다

#### 인수 조건
- [ ] 결제 완료 상태의 주문만 취소할 수 있다
- [ ] 취소 시 재고가 복구된다
- [ ] 취소 시 결제 금액이 환불된다
- [ ] 취소 시 사용한 쿠폰이 복구된다
- [ ] 취소 사유를 입력할 수 있다

#### 시나리오
```gherkin
Given 사용자가 상품 A 2개를 20,000원에 주문 완료했을 때
And 현재 잔액이 30,000원일 때
When 사용자가 주문을 취소하면
Then 주문 상태가 "취소됨"으로 변경된다
And 잔액이 50,000원으로 환불된다
And 상품 A의 재고가 2개 증가한다
```

---

## 5. 쿠폰 관리

### US-016: 쿠폰 목록 조회
**As a** 사용자
**I want to** 발급 가능한 쿠폰 목록을 보고 싶다
**So that** 할인 혜택을 받을 수 있는 쿠폰을 찾을 수 있다

#### 인수 조건
- [ ] 현재 발급 가능한 쿠폰만 표시된다
- [ ] 쿠폰 이름, 할인 타입, 할인 값이 표시된다
- [ ] 최소 주문 금액 조건이 표시된다
- [ ] 남은 수량이 표시된다

---

### US-017: 쿠폰 발급 (선착순)
**As a** 사용자
**I want to** 원하는 쿠폰을 발급받고 싶다
**So that** 주문 시 할인을 받을 수 있다

#### 인수 조건
- [ ] 선착순으로 쿠폰이 발급된다
- [ ] 수량이 소진되면 발급이 불가능하다
- [ ] 동일한 쿠폰을 중복 발급받을 수 없다
- [ ] 1인당 최대 발급 수량 제한이 적용된다
- [ ] 발급 성공 시 내 쿠폰 목록에 추가된다

#### 시나리오
```gherkin
Given "신규 가입 쿠폰"의 남은 수량이 1개일 때
When 사용자 A와 사용자 B가 동시에 발급 요청하면
Then 먼저 요청한 사용자만 발급에 성공한다
And 다른 사용자는 "쿠폰이 소진되었습니다" 에러를 받는다
```

---

### US-018: 보유 쿠폰 조회
**As a** 사용자
**I want to** 내가 보유한 쿠폰을 보고 싶다
**So that** 사용 가능한 쿠폰을 확인할 수 있다

#### 인수 조건
- [ ] 발급받은 모든 쿠폰이 표시된다
- [ ] 쿠폰 상태(사용 가능/사용 완료/만료)가 표시된다
- [ ] 사용 기한이 표시된다
- [ ] 사용 가능한 쿠폰만 필터링할 수 있다

---

### US-019: 주문 시 쿠폰 적용
**As a** 사용자
**I want to** 주문 시 보유한 쿠폰을 사용하고 싶다
**So that** 할인을 받고 상품을 구매할 수 있다

#### 인수 조건
- [ ] 사용 가능한 쿠폰 목록이 표시된다
- [ ] 최소 주문 금액을 만족하는 쿠폰만 선택 가능하다
- [ ] 쿠폰 적용 후 할인 금액이 표시된다
- [ ] 정률 쿠폰은 최대 할인 금액이 적용된다
- [ ] 결제 성공 시 쿠폰이 "사용됨" 상태로 변경된다

#### 시나리오
```gherkin
Given 사용자가 10% 할인 쿠폰(최대 5,000원)을 보유하고
And 장바구니 금액이 60,000원일 때
When 쿠폰을 적용하고 주문하면
Then 할인 금액은 5,000원이다 (10%인 6,000원이 아닌 최대 금액)
And 최종 결제 금액은 55,000원이다
```

---

## 6. 재입고 알림

### US-020: 재입고 알림 신청
**As a** 사용자
**I want to** 품절된 상품의 재입고 알림을 신청하고 싶다
**So that** 재입고되면 바로 구매할 수 있다

#### 인수 조건
- [ ] 품절 상품에 대해서만 알림 신청이 가능하다
- [ ] 동일 상품에 중복 신청은 불가능하다
- [ ] 신청 성공 시 확인 메시지가 표시된다

#### 시나리오
```gherkin
Given 상품 A의 재고가 0개일 때
When 사용자가 상품 A의 재입고 알림을 신청하면
Then 알림 신청이 성공한다
And 알림 상태는 "대기 중"이 된다
```

---

### US-021: 재입고 알림 수신
**As a** 사용자
**I want to** 신청한 상품이 재입고되면 알림을 받고 싶다
**So that** 놓치지 않고 구매할 수 있다

#### 인수 조건
- [ ] 상품이 재입고되면 자동으로 알림이 발송된다
- [ ] 알림은 신청 순서대로 발송된다
- [ ] 알림 발송 후 상태가 "발송 완료"로 변경된다

---

## 📌 우선순위

### Priority 1 (필수)
- US-001: 잔액 충전
- US-004: 상품 목록 조회
- US-005: 상품 상세 조회
- US-008: 장바구니에 상품 추가
- US-012: 주문 생성 및 결제

### Priority 2 (중요)
- US-006: 인기 상품 조회
- US-013: 주문 내역 조회
- US-017: 쿠폰 발급
- US-019: 주문 시 쿠폰 적용
- US-020: 재입고 알림 신청

### Priority 3 (선택)
- US-015: 주문 취소
- US-007: 카테고리별 상품 조회
- US-011: 장바구니 전체 비우기

---

## 📝 테스트 시나리오 작성 가이드

각 User Story는 다음 형식으로 테스트 시나리오를 작성합니다:

```gherkin
Feature: [기능명]

  Scenario: [성공 시나리오]
    Given [초기 상태]
    When [사용자 행동]
    Then [예상 결과]
    And [추가 검증]

  Scenario: [실패 시나리오]
    Given [초기 상태]
    When [사용자 행동]
    Then [에러 발생]
    And [상태 변경 없음]
```

---

**최종 업데이트**: 2025-11-04
**문서 버전**: 2.0.0